var jio = require('jio');

var fn = function(v){
	var p = jio.promise();
	setTimeout(function(){
		p.fulfill('done');
	},v);
	return p;
};


jio.all([fn(5000), fn(1000), fn(2000)]).then(function(v){
	console.log('success1', v);
}, function(){
	console.log('timeout1');
})


jio.all({a:fn(5000), b:fn(1000), c:fn(2000)}).timeout(2000).then(function(v){
	console.log('success2', v);
}, function(){
	console.log('timeout2');
})


jio.any([fn(5000), fn(1000), fn(2000)]).timeout(2000).then(function(v){
	console.log('success3', v);
}, function(){
	console.log('timeout3');
})

// = jio.when(fn(1000))
fn(2000).delay(1000).callback(function(v){
	console.log('delay completed', v);
});


fn(1000).then(function(){
	console.log('test destroy');
	return jio.destroy;
}).then(function(){
	console.log('NOT CALLED');
});
